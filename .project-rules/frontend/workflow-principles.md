---
description: AI Agent 开发工作流程通用原则 - 代码分析、工具验证、增量修改、ESM 模块化等通用执行原则
---

# 开发工作流程通用原则

本文档定义了 AI Agent 执行开发任务的通用执行原则，适用于所有类型的开发任务。

---

## 通用执行原则

### 1. 代码分析优先
- 先分析代码结构，理解现有实现
- 搜索相关代码，理解上下文和依赖关系
- 理解数据流和模块职责
- 不要假设代码结构，必须先分析
- 没有特别指定，不需要新增任何的分析类的事件上报

### 2. 工具命令验证
- 每次修改后运行类型检查确保没有类型错误
- 每次修改后运行代码格式检查确保格式正确
- 每次修改后运行代码质量检查确保符合规范
- 读取并修复所有 lint 错误
- 不要跳过类型检查和 lint 检查

### 3. 增量修改
- 每次只修改必要的文件
- 保持修改范围最小化
- 遵循现有代码风格和架构模式
- 不要一次性修改大量无关文件

### 4. 验证步骤
- 运行类型检查确保没有类型错误
- 运行 lint 检查确保代码质量
- 检查导入导出是否正确
- 检查是否有未使用的代码

### 5. ESM 模块化规范
- 使用 ESM（ES Module）模块化规范
- 使用静态导入：`import { ... } from './path'`
- 使用命名导出：`export { ... }` 或 `export const ...`
- **禁止使用动态导入**：不允许使用 `import()`、`require()` 或 `await import()`
- **禁止使用 CommonJS**：不允许使用 `module.exports` 或 `require()`

---

## 工具命令参考

### 类型检查
- 增量类型检查（推荐，速度快）
- 完整类型检查

### 代码格式化和检查
- Biome 检查和自动修复
- ESLint 检查
- 运行所有 lint 检查

### 完整检查（提交前）
- 运行所有检查（类型 + 格式 + lint）

---

## 重要原则

- **Spec 优先**：对于功能开发，必须先完成 Spec 设计，确认无误后才能开始编码
- **增量验证**：每个步骤完成后都要验证，确保代码质量
- **最小改动**：Bugfix 和 Small Change 要保持改动范围最小化
- **逐步重构**：Refactor 要分步骤进行，每个步骤都要验证
- **ESM 模块化**：严格使用 ESM 规范，禁止动态导入（`import()`、`require()`）

